# config.py
import os
from dotenv import load_dotenv

load_dotenv()

# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
VK_TOKEN = os.getenv("VK_TOKEN")
GROUP_ID = int(os.getenv("GROUP_ID", "0"))  # –î–û–ë–ê–í–¨–¢–ï int()
FOUNDER_ID = int(os.getenv("FOUNDER_ID", "0"))
CONFIRMATION_TOKEN = os.getenv("CONFIRMATION_TOKEN", "your_confirmation_token")

# Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
WEBHOOK_URL = os.getenv("WEBHOOK_URL", "https://your-domain.com/webhook")
SECRET_KEY = os.getenv("SECRET_KEY", "your_secret_key")

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
os.makedirs("data", exist_ok=True)
DB_PATH = "data/bot.db"

# –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (–ò–°–ü–†–ê–í–¨–¢–ï –û–ü–ï–ß–ê–¢–ö–£)
ROLES = {
    1: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
    2: "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä", 
    3: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",  # –ë–´–õ–û: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞ator" - –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ–ø–µ—á–∞—Ç–∫—É
    4: "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å",
    5: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
}

# –ü—Ä–∞–≤–∞ –¥–ª—è —Ä–æ–ª–µ–π
ROLE_PERMISSIONS = {
    2: {"–º—É—Ç": True, "–∫–∏–∫": True, "–±–∞–Ω": True},
    3: {"–º—É—Ç": True, "–∫–∏–∫": True, "–±–∞–Ω": True, "–ø—Ä–æ—Å–º–æ—Ç—Ä_—á—Å": True, 
        "–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ_—á—Å": True, "—É–¥–∞–ª–µ–Ω–∏–µ_—á—Å": True, "—Ä–µ–∂–∏–º_—Ç–∏—à–∏–Ω—ã": True},
    4: {"–º—É—Ç": True, "–∫–∏–∫": True, "–±–∞–Ω": True, "–ø—Ä–æ—Å–º–æ—Ç—Ä_—á—Å": True,
        "–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ_—á—Å": True, "—É–¥–∞–ª–µ–Ω–∏–µ_—á—Å": True, "—Ä–µ–∂–∏–º_—Ç–∏—à–∏–Ω—ã": True,
        "–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ_—Ä–æ–ª–µ–π": True},
    5: {"–≤—Å–µ_–ø—Ä–∞–≤–∞": True}
}

# –¢–∏–ø—ã —á–µ—Ä–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
BLACKLIST_TYPES = {
    "–ß–°–ü": "–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–∞",
    "–ß–°–ê": "–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏", 
    "–ß–°–õ": "–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ª–∏–¥–µ—Ä–æ–≤",
    "–ß–°–ó": "–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª–µ–π"
}

# –í—Ä–µ–º—è –º—É—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
MUTE_DURATIONS = {
    "10 –º–∏–Ω—É—Ç": 10,
    "1 —á–∞—Å": 60, 
    "6 —á–∞—Å–æ–≤": 360,
    "1 –¥–µ–Ω—å": 1440,
    "3 –¥–Ω—è": 4320,
    "1 –Ω–µ–¥–µ–ª—è": 10080
}

# –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –≤ —á–∞—Ç–∞—Ö
CHAT_COMMANDS_AVAILABLE = True

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–æ—Ç–∞ (–î–û–ë–ê–í–¨–¢–ï –≠–¢–û)
DEBUG_MODE = os.getenv("DEBUG_MODE", "False").lower() == "true"
LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
MAX_WARNINGS = 3  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
WARNING_EXPIRE_DAYS = 30  # –ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å–≥–æ—Ä–∞—é—Ç

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º—É—Ç–æ–≤
MIN_MUTE_DURATION = 5  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º—É—Ç –≤ –º–∏–Ω—É—Ç–∞—Ö
MAX_MUTE_DURATION = 10080  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º—É—Ç –≤ –º–∏–Ω—É—Ç–∞—Ö (7 –¥–Ω–µ–π)
DEFAULT_MUTE_DURATION = 60  # –ú—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (60 –º–∏–Ω—É—Ç)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–Ω–æ–≤
MIN_BAN_DURATION = 1  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–Ω –≤ –¥–Ω—è—Ö
MAX_BAN_DURATION = 365  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–Ω –≤ –¥–Ω—è—Ö
DEFAULT_BAN_DURATION = 1  # –ë–∞–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (1 –¥–µ–Ω—å)

# –ü—É—Ç—å –∫ –ª–æ–≥–∞–º
LOG_FILE = "data/bot.log"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
def check_config():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—Å–µ –ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"""
    required_vars = ["VK_TOKEN", "GROUP_ID"]
    missing_vars = []
    
    for var in required_vars:
        if not os.getenv(var):
            missing_vars.append(var)
    
    if missing_vars:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: {', '.join(missing_vars)}")
        print("–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:")
        print("VK_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–≥—Ä—É–ø–ø—ã")
        print("GROUP_ID=–≤–∞—à_id_–≥—Ä—É–ø–ø—ã")
        print("FOUNDER_ID=–≤–∞—à_id_–≤–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)")
        return False
    
    if not VK_TOKEN:
        print("‚ùå VK_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
        return False
    
    if GROUP_ID == 0:
        print("‚ùå GROUP_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ —Ä–∞–≤–µ–Ω 0!")
        return False
    
    print("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
    print(f"üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:")
    print(f"   ‚Ä¢ –ì—Ä—É–ø–ø–∞ ID: {GROUP_ID}")
    print(f"   ‚Ä¢ –û—Å–Ω–æ–≤–∞—Ç–µ–ª—å ID: {FOUNDER_ID if FOUNDER_ID else '–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}")
    print(f"   ‚Ä¢ –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏: {'–í–ö–õ' if DEBUG_MODE else '–í–´–ö–õ'}")
    print(f"   ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: {LOG_LEVEL}")
    
    return True

# –ï—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
if __name__ == "__main__":
    if check_config():
        print("‚úÖ –í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞!")
    else:
        print("‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞")